{
  "db_name": "PostgreSQL",
  "query": "\n        -- PostgreSQL 15+ (including 16, 17): dependencies are on pg_attrdef (NORMAL)\n        SELECT DISTINCT\n            n.nspname AS \"table_schema!\",\n            c.relname AS \"table_name!\",\n            a.attname AS \"column_name!\",\n            pf.proname AS \"function_name!\",\n            nf.nspname AS \"function_schema!\",\n            pg_catalog.pg_get_function_identity_arguments(pf.oid) AS \"function_args!\",\n            (\n                SELECT e.extname\n                FROM pg_depend ext_dep\n                JOIN pg_extension e ON ext_dep.refobjid = e.oid\n                WHERE ext_dep.objid = pf.oid\n                AND ext_dep.deptype = 'e'\n                LIMIT 1\n            ) AS \"extension_name?\"\n        FROM pg_depend d\n        JOIN pg_attrdef ad ON d.classid = 'pg_attrdef'::regclass AND d.objid = ad.oid\n        JOIN pg_attribute a ON a.attrelid = ad.adrelid AND a.attnum = ad.adnum\n        JOIN pg_class c ON c.oid = a.attrelid\n        JOIN pg_namespace n ON n.oid = c.relnamespace\n        JOIN pg_proc pf ON d.refclassid = 'pg_proc'::regclass AND d.refobjid = pf.oid\n        JOIN pg_namespace nf ON pf.pronamespace = nf.oid\n        WHERE (a.attgenerated = 's' OR a.atthasdef = true)  -- STORED generated columns OR default expressions\n          AND d.deptype = 'n'  -- NORMAL dependency in v15+\n          AND n.nspname NOT IN ('pg_catalog', 'information_schema', 'pg_toast')\n          AND nf.nspname NOT IN ('pg_catalog', 'information_schema', 'pg_toast')\n\n        UNION ALL\n\n        -- PostgreSQL 12-14: dependencies are on the column (AUTO)\n        SELECT DISTINCT\n            n.nspname AS \"table_schema!\",\n            c.relname AS \"table_name!\",\n            a.attname AS \"column_name!\",\n            pf.proname AS \"function_name!\",\n            nf.nspname AS \"function_schema!\",\n            pg_catalog.pg_get_function_identity_arguments(pf.oid) AS \"function_args!\",\n            (\n                SELECT e.extname\n                FROM pg_depend ext_dep\n                JOIN pg_extension e ON ext_dep.refobjid = e.oid\n                WHERE ext_dep.objid = pf.oid\n                AND ext_dep.deptype = 'e'\n                LIMIT 1\n            ) AS \"extension_name?\"\n        FROM pg_depend d\n        JOIN pg_attribute a ON d.classid = 'pg_class'::regclass\n                             AND d.objid = a.attrelid\n                             AND d.objsubid = a.attnum\n        JOIN pg_class c ON c.oid = a.attrelid\n        JOIN pg_namespace n ON n.oid = c.relnamespace\n        JOIN pg_proc pf ON d.refclassid = 'pg_proc'::regclass AND d.refobjid = pf.oid\n        JOIN pg_namespace nf ON pf.pronamespace = nf.oid\n        WHERE (a.attgenerated = 's' OR a.atthasdef = true)  -- STORED generated columns OR default expressions\n          AND d.deptype = 'a'  -- AUTO dependency in pre-v15\n          AND n.nspname NOT IN ('pg_catalog', 'information_schema', 'pg_toast')\n          AND nf.nspname NOT IN ('pg_catalog', 'information_schema', 'pg_toast')\n        ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "table_schema!",
        "type_info": "Name"
      },
      {
        "ordinal": 1,
        "name": "table_name!",
        "type_info": "Name"
      },
      {
        "ordinal": 2,
        "name": "column_name!",
        "type_info": "Name"
      },
      {
        "ordinal": 3,
        "name": "function_name!",
        "type_info": "Name"
      },
      {
        "ordinal": 4,
        "name": "function_schema!",
        "type_info": "Name"
      },
      {
        "ordinal": 5,
        "name": "function_args!",
        "type_info": "Text"
      },
      {
        "ordinal": 6,
        "name": "extension_name?",
        "type_info": "Name"
      }
    ],
    "parameters": {
      "Left": []
    },
    "nullable": [
      null,
      null,
      null,
      null,
      null,
      null,
      null
    ]
  },
  "hash": "958663378e6d1d345e91b3ca0f431a1d8c2409df987c0031e873dbb69d227b48"
}
